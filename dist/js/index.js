!function(t,a){function e(){this.index=0,this.dataList=[],this.indexCre=null,this.lock=!0,this.list=null,this.timer=null}e.prototype={init:function(){this.play=document.getElementsByClassName("play")[0],this.prev=document.getElementsByClassName("prev")[0],this.next=document.getElementsByClassName("next")[0],this.playlist=document.getElementsByClassName("playlist")[0],this.img=document.getElementsByTagName("img")[0],this.getData(),this.renderPage(),console.log(this.audio.status)},getData:function(){var e=this;t.ajax({url:"../mock/data.json",type:"GET",success:function(t){e.dataList=t,e.sonList(),e.indexCre=new a.IndexCre(t.length),e.index=e.indexCre.index,e.renderPage(e.index),e.audioCre()}})},renderPage:function(t){a.renderObj.render(this.dataList[t]),a.renderObj.info(this.dataList[t]),a.renderObj.liking(this.dataList[t].isLike),a.audio.load(this.dataList[t].audioSrc),"playing"===a.audio.status&&(a.progressBar.clearTimer(),a.audio.play(),this.play.className="play playing",this.rotate(0),this.bar())},audioCre:function(){var e=this;this.play.addEventListener("touchend",function(){var t;"pause"==a.audio.status?(a.audio.play(),e.play.className="play playing",t=e.img.dataset.rotate||0,e.rotate(t),e.bar()):(a.audio.pause(),e.play.className="play",clearInterval(e.timer))},!1),this.prev.addEventListener("touchend",function(){a.audio.status="playing";var t=e.indexCre.prev();e.list.changeSelected(t),e.renderPage(t)},!1),this.next.addEventListener("touchend",function(){a.audio.status="playing";var t=e.indexCre.next();e.list.changeSelected(t),e.renderPage(t)},!1)},rotate:function(t){var e=this;clearInterval(this.timer),this.timer=setInterval(function(){t=+t+.2,e.img.style.transform="rotate("+t+"deg)",e.img.dataset.rotate=t},1e3/60)},bar:function(){a.progressBar.controlPro(),a.progressBar.dragBar()},sonList:function(){var i=this;this.list=new a.ListControl(this.dataList),this.list.renderList(),this.close=document.getElementsByClassName("close")[0],this.playlist.addEventListener("touchend",function(){i.list.slideUp()},!1),this.close.addEventListener("touchend",function(){i.list.slideDown()},!1),console.log(this.list.menuList),this.list.menuList.forEach(function(t,e){t.addEventListener("touchend",function(){"active"!=this.className&&(i.list.changeSelected(e),a.audio.status="playing",i.renderPage(e))},!1)})}};var i=new e;i.init(),a.dataList=i.dataList}(window.Zepto,window.player||(window.player={}));