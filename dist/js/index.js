!function(t,s){function e(){this.index=0,this.dataList=[],this.indexCre=null,this.lock=!0,this.list=null}e.prototype={init:function(){this.play=document.getElementsByClassName("play")[0],this.prev=document.getElementsByClassName("prev")[0],this.next=document.getElementsByClassName("next")[0],this.playlist=document.getElementsByClassName("playlist")[0],this.getData(),this.renderPage(),console.log(this.audio.status)},getData:function(){var e=this;t.ajax({url:"../mock/data.json",type:"GET",success:function(t){e.dataList=t,e.sonList(),e.indexCre=new s.IndexCre(t.length),e.index=e.indexCre.index,e.audioCre(),e.renderPage(e.index)}})},renderPage:function(t){s.renderObj.render(this.dataList[t]),s.renderObj.info(this.dataList[t]),s.renderObj.liking(this.dataList[t].isLike),s.audio.load(this.dataList[t].audioSrc),"playing"===s.audio.status&&(s.audio.play(),this.play.className="play playing")},audioCre:function(){var e=this;this.play.addEventListener("touchend",function(){"pause"==s.audio.status?(s.audio.play(),e.play.className="play playing"):(s.audio.pause(),e.play.className="play")},!1),this.prev.addEventListener("touchend",function(){s.audio.status="playing";var t=e.indexCre.prev();e.list.changeSelected(t),e.renderPage(t)},!1),this.next.addEventListener("touchend",function(){s.audio.status="playing";var t=e.indexCre.next();e.list.changeSelected(t),e.renderPage(t)},!1)},sonList:function(){var i=this;this.list=new s.ListControl(this.dataList),this.list.renderList(),this.close=document.getElementsByClassName("close")[0],this.playlist.addEventListener("touchend",function(){i.list.slideUp()},!1),this.close.addEventListener("touchend",function(){i.list.slideDown()},!1),console.log(this.list.menuList),this.list.menuList.forEach(function(t,e){t.addEventListener("touchend",function(){"active"!=this.className&&(i.list.changeSelected(e),s.audio.status="playing",i.renderPage(e))},!1)})}};var i=new e;i.init(),s.dataList=i.dataList}(window.Zepto,window.player||(window.player={}));